<!--
  ~ Licensed under the MIT License (https://opensource.org/licenses/MIT).
  ~ Find the full license text in the LICENSE file of the project root.
  -->
<mat-card
  class="no-min-height m-3 flex-shrink-1 d-flex flex-column"
  *ngIf="lines$ | async as lines"
>
  <mat-card-title>Export</mat-card-title>
  <mat-card-content
    class="no-min-height flex-grow-1 d-flex flex-column align-items-start"
  >
    <div class="d-flex mb-3">
      <mat-checkbox
        class="mr-3"
        color="primary"
        [checked]="includeWaypoints"
        (change)="includeWaypoints = !includeWaypoints"
        >Include Waypoints
      </mat-checkbox>
      <mat-checkbox
        class="mr-3"
        color="primary"
        [checked]="exportAsMap"
        (change)="exportAsMap = !exportAsMap"
        >Export as Map
      </mat-checkbox>
    </div>
    <h3 class="mat-h3">Line Selection</h3>
    <div class="d-flex mb-3">
      <button
        mat-stroked-button
        class="mr-3"
        color="primary"
        (click)="excludeAll(lines)"
      >
        Exclude All
      </button>
      <button mat-stroked-button color="primary" (click)="excludeNone()">
        Exclude None
      </button>
    </div>
    <div
      class="no-min-height d-flex flex-grow-1 flex-shrink-1 flex-wrap overflow-auto"
    >
      <div
        *ngFor="let line of lines"
        (click)="toggleExcludeLine(line.name)"
        class="d-flex align-items-center m-2 pointer-cursor"
      >
        <div
          class="mr-2 line-indicator"
          [style.background-color]="line.color"
        ></div>
        <span [class.disabled]="excludedExportLines[line.name]">{{
          line.name
        }}</span>
      </div>
    </div>
  </mat-card-content>
</mat-card>
<toolbar *ngIf="lines$ | async as lines">
  <button mat-raised-button color="accent" (click)="exportLines(lines)">
    Export
  </button>
</toolbar>
