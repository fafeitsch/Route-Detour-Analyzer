<!--
  ~ Licensed under the MIT License (https://opensource.org/licenses/MIT). Find the full license text in the LICENSE file of the project root.
  -->
<div cdkDropListGroup *ngIf="line$ | async" class="p-3">
  <div
    *ngIf="(line$ | async).length > 0"
    cdkDropList
    class="trash d-flex align-items-stretch disabled mt-2"
    (cdkDropListDropped)="dropOnTrash($event)"
  >
    <div class="w-100 pl-2 pt-2 pb-2">Drop stops here to delete them.</div>
  </div>
  <div *ngIf="!(line$ | async).length" class="w-100 pl-2 pt-2 pb-2 disabled">Click on the map to add a stop.</div>
  <div class="w-100 d-flex justify-content-flex-end disabled">
    {{ (distance$ | async) / 1000 | number: '1.0-3' }} km
  </div>
  <div cdkDropList cdkDropListLockAxis="y" (cdkDropListDropped)="drop($event)">
    <div cdkDrag *ngFor="let stop of line$ | async; index as i; last as last" [cdkDragDisabled]="editedStops !== 0">
      <stop-editor
        [ngClass]="editedStops === 0 ? 'grab-cursor' : ''"
        [stopName]="stop.name"
        [isRealStop]="stop.realStop"
        [isFirstStop]="i === 0"
        [isLastStop]="last"
        (enterEditMode)="editedStops = editedStops + 1"
        (leaveEditMode)="editedStops = editedStops - 1"
        (changeName)="changeName(i, $event)"
        (toggleRealStop)="toggleRealStop(i)"
        (mouseenter)="setFocusedStop(stop)"
        (mouseleave)="unsetFocusedStop()"
      >
      </stop-editor>
    </div>
  </div>
</div>
