<!--
  ~ Licensed under the MIT License (https://opensource.org/licenses/MIT).
  ~ Find the full license text in the LICENSE file of the project root.
  -->
<div class="ov-hidden flex-grow-1 d-flex flex-column">
  <header class="mat-body-strong mat-h3 d-flex align-items-flex-center">
    Lines
    <button mat-icon-button color="primary" class="ml-1" (click)="addLine()">
      <icon-plus [iconWidth]="16"></icon-plus>
    </button>
  </header>

  <div class="ov-auto flex-grow-1">
    <div *ngFor="let line of lines$ | async; trackBy: trackBy">
      <ng-container *ngIf="selectedLine$ | async as selectedLine">
        <div
          class="d-flex align-items-flex-center"
          [ngClass]="
            selectedLine.name === line.name
              ? 'primary-light-background'
              : 'pointer-cursor'
          "
          (click)="selectLine(line)"
        >
          <input
            type="color"
            [style.width.px]="40"
            [value]="line.color"
            (change)="changeColor(line.name, $event)"
          />
          <inline-editor
            class="flex-grow-1 ml-3"
            [text]="line.name"
            (changeText)="renameLine(line.name, $event)"
            (leaveEditMode)="toggleInlineEditor()"
            (enterEditMode)="toggleInlineEditor()"
          ></inline-editor>
          <delete-button
            [disabled]="selectedLine.name === line.name"
            (delete)="deleteLine(line)"
          ></delete-button>
        </div>
      </ng-container>
    </div>
  </div>
</div>
